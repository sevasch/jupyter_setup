# Scope
This repository serves as template and tutorial for future projects containing **Jupyter** notebooks and/or **Matplotlib** plots. 

# About Jupyter notebooks
Jupyter notebooks allow the user to arrange text, code and visualizations in a single document. These documents executable so that the data displayed within the documents can quickly be updated. 

Using Jupyter notebooks only makes sense if it's features can be used extensively. This includes: 
- data visualization and analysis
- when traceability of the data is required
- when the displayed data has to be updated frequently 
- to quickly summarize the results
- when formulas should be added to the text
- etc. 

As Jupyter notebooks get bigger or if they contain a lot of code, they can become hard to navigate. Also, for users that don't need insight into the underlying code, Jupyter notebooks might not be the best fit. 


# Setup
For this tutorial, we only install the jupyter notebook package and not the jupyter lab. As VSCode is the standard editor, we don't necessarily need jupyter-lab to edit the notebooks. But first, install the Jupyter extension from the VSCode extensions marketplace. 

## Python setup
Make sure, a proper version python is installed. Select a version that comes with pip. 

## Python environment setup
It is recommended, to use virtualenv to encapsulate the project packages. To set it up, run

```
pythonX.X -m pip install virtualenv
pythonX.X -m virtualenv venv
source venv/bin/activate
```

Replace "X.X" with the desired python version. 
When opening a new terminal, the virtual environment should be indicated as **(venv)**. Now, single packages can be installed as follows: 

```
pip install package_name
```

They can also be grouped in a requirements file by hand or by using the package **pipreqs**. See **requirements.txt** as reference. To install the requirements of this repository, run 

```
pip install -r requirements.txt
```

## LaTeX
To export Jupyter notebooks as described below, LaTeX must be installed. Follow the steps described in the error message, as this might change over time. 

## Folder structure setup 
It is recommended to create a **docs/** directory in the repository tree to store all documentation. Source files should remain in **src/**

# Application
## Matplotlib plots
To use a uniform format for plots, a matplotlib stylesheet has been created in the repository directory. It is named **.mplstyle** and can be used by calling the following function before creating plots: 

```
plt.style.use(".mplstyle")
```

Be aware that the path might vary depending on the file that is calling it. For more information, see https://matplotlib.org/stable/tutorials/introductory/customizing.html. 


## Exporting Jupyter notebooks to PDF
The documentation files can be exported to PDF using the following command: 

```
jupyter-nbconvert --to pdf --no-input example.ipynb
```

The *--no-input* argument hides all code. To export the graphics as vector graphics, add the following lines of code: 

```
from IPython.display import set_matplotlib_formats
set_matplotlib_formats('png', 'pdf')
```

For plots with a lot of data points, this might slow down the pdf reader. In that case, consider using .png format. 

# Other tutorials
To create and work with Jupyter notebooks in VSCode, follow this tutorial: https://code.visualstudio.com/docs/datascience/jupyter-notebooks 

Note that we already set up the environment, so start the tutorial at "Create or open a Jupyter Notebook". 

As an alternative to VSCode, JupyterLab can be used. It is an alternative IDE made specifically to work with jupyter notebooks. Full documentation can be found here: https://jupyterlab.readthedocs.io/en/stable/

Full documentation on the notebooks can be found here: https://jupyter-notebook.readthedocs.io/en/stable/notebook.html


# Useful tips / solutions to frequent problems
## Presenting jupyter notebooks as slides
This article presents the procedure to generate slideshows from Jupyter notebooks: https://towardsdatascience.com/5-slides-for-tips-on-presentation-mode-in-jupyter-notebook-f858b15fff4f

## Can't export to PDF because TeX is missing
 Exporting to PDF may cause issues if TeX is not installed on the system. There is a simple workaround for this. Simply export to HTML and the use a web browser to export to PDF. 

## Updating imported functions
Importing python modules to Jupyter notebooks is usually done in the beginning of a notebook and might not be re-run every time. If an imported function changes, the changes might not take effect within the notebook. There is an easy fix for this: Before importing the first module in the notebook, add the following lines in a code block: 

```
%load_ext autoreload
%autoreload 2
```

## Displaying Matplotlib plots inline
To display plots generated by matplotlib within the jupyter notebok, add this in the first cell: 
```
%matplotlib inline
```

## For VSCode dark mode users
Matplotlib plots in notebooks don't adapt to the users VSCode color scheme which might be unpleasant for some users. To change the background color of all plots, append this line of code in the beginning of the document: 

```python
plt.style.use('dark_background')
```